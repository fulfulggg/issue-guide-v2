# Production Foundation — Requirements

## 今回の変更

- Production Foundation の要件（本番閲覧可能 / API疎通 / Workspace概念）を定義する。

## Goal

- 本番環境でアプリケーションが「閲覧可能」な状態で動作し、以降の機能（生成・編集・デプロイ）を載せられる土台を提供する。
- 本番環境で、将来の機能が利用するためのAPIを追加できる構造を用意する。
- 本番環境で、将来の「生成物/編集結果」を扱うためのWorkspace（下書き/ドラフト）の概念を導入し、識別子を介して参照できる状態にする。

## Non-Goals

- 画像/プロンプトからWebサイト初案を自動生成する機能（AI生成）はこのPRでは扱わない。
- 生成物を見ながら柔軟に編集するUI/体験（Visual Editor本番対応）はこのPRでは扱わない。
- Vercel等へのワンクリックデプロイや、GitHub連携を含むデプロイ機能はこのPRでは扱わない。
- Workspaceの保存先の具体的な技術選定（例: どのDB/KV/Blobを使うか）および運用最適化はこのPRでは確定しない。
- Workspaceの永続化（再起動後も参照できること）や、複数インスタンス環境での整合性保証はこのPRでは扱わない（揮発でもよい）。
- 認証・認可（誰が編集可能か）の最終形はこのPRでは扱わない。

## Acceptance Criteria

- 本番環境で、アプリケーションがURL経由で表示できる（最低限トップが表示できる）。

- 本番環境で、APIを配置でき、疎通確認できる（例: ヘルスチェック相当で200が返る）。

- Workspace概念が存在し、以下が成立する：

  - Workspaceを作成できる。
    - ただし実装がin-memoryのため、サーバが単一プロセスで稼働している範囲でのみ成立する。
    - また、サーバ側でWorkspace数に上限（例: 1000件）を設ける場合、上限到達後は作成が失敗（例: 503）しうる。
  - Workspaceを識別子で参照できる（同一プロセス稼働中の範囲）。
  - 期待しない入力に対しては適切なエラーを返す（少なくとも4xx/5xxの区別）。

- 機密情報（APIキー等）をリポジトリにコミットしない運用になっている。

- Backout（撤回）が可能：このPRで追加した要素を取り除いても、アプリの閲覧ができる状態に戻せる。
